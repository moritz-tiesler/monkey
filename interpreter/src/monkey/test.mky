let map = fn(arr, func) {
    let iter = fn(arr, acc) {
        if (arr.len() == 0) {
            return acc
        } else {
            iter(arr.rest(), push(acc, func(arr.first())))
        }
    }
    iter(arr, [])
}

let forEach = fn(arr, action) {
	let iter = fn(arr) {
		if (arr.len() != 0) {
			action(arr.first())
			iter(arr.rest())
		}			
	}
	iter(arr)
	arr
}

let acc = fn(arr, initial, f) {
	let iter = fn(arr, curr) {
		if (arr.len() == 0) {
			return curr
		} else {
			iter(arr.rest(), f(curr, arr.first()))
		}
	}
	iter(arr, initial)
};

[1, 2, 3]
	.map {x -> x * 2}
	.forEach {x -> puts(x)}
	.acc(100) {x, y -> x + y }
	.puts();

